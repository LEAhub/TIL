# 자바에서의 입출력 I / O

입출력이란 컴퓨터 내부/외부 장치와 프로그램의 대화이다. 보통 콘솔로 진행된다.

## 스트림이란?

데이터를 주고 받을 두 대상을 이어줄 무언가가 필요한데 그 이어주는 역할을 스트림이 하게 된다.

데이터가 연속적으로 물처럼 흐르는 것과 비유할 수 있다.

물이 한 방향으로 흐르는 것처럼 스트림은 단방향 통신만 가능하다.

하나의 스트림으로 입출력이 불가능하단 의미이다.

동시에 입출력을 가능하기 위해서 입력 스트림과 출력 스트림 즉, 두 가지의 스트림을 활용하자!

먼저 보낸 데이터를 먼저 받을 수 있어서 Collection의 Queue를 생각하면 된다. (First In First Out)

> ## Stream
> 
> > ### 1\. 바이트 기반의 스트림
> > 
> > > ● InputStream / OutputStream
> > > 
> > > > 모든 바이트 기반의 스트림의 조상이다.
> > > 
> > > ● ByteArrayInputStream / ByteArrayOutputStream
> > > 
> > > > 바이트 배열에 데이터를 입출력하는데 사용되는 스트림이다.
> > > > 
> > > > 다른 곳에 입출력하기 전에 데이터를 임시로 데이터 배열에 담아서 변환하는 작업에 사용
> > > 
> > > ● FileInputStream / FileOutputStream
> > > 
> > > > 파일에 입출력하기 위한 스트림이다.
> > > > 
> > > > 프로그래밍에서 많이 사용되는 스트림 중 하나이다.
> > > 
> > > ### 바이트 기반의 보조스트림
> > > 
> > > > ● FilterInputStream / FilterOutputStream
> > > > 
> > > > > InputStream / OutputStream의 조상
> > > > > 
> > > > > 모든 보조 스트림의 조상
> > > > 
> > > > ● BufferedInputStream / BufferedOutputStream
> > > > 
> > > > > 보조 스트림이다.
> > > > > 
> > > > > 한 바이트씩 입출력하는 것보다 버퍼(바이트배열)을 사용하여 한 번에 여러 바이트를 출력한다.
> > > > 
> > > > ● DataInputStream / DataOutputStream
> > > > 
> > > > > FilterInputStream / FilterOutputStream의 자손
> > > > > 
> > > > > 각각 DataInput / DataOutput 인터페이스를 구현했다.
> > > > > 
> > > > > 때문에 데이터를 읽고 쓰는데 byte 단위가 아닌 8가지 기본 자료형의 단위로 읽고 쓰기 가능하다.
> > > > > 
> > > > > 각 기본자료형을 16진수로 표현하여 저장한다.
> > > > > 
> > > > > int 값을 출력하면 4byte의 16진수로 출력된다.
> > > > > 
> > > > > 각각 자료형의 크기가 다르기 때문에 출력한 데이터를 읽고 오는 순서에 유의해야 한다.
> > > > 
> > > > ● SequenceInputStream
> > > > 
> > > > > 여러 개의 입력 스트림을 연속적으로 연결해서 하나의 스트림으로 데이터를 읽는 것과 같은 과정을 수행한다.
> > > > > 
> > > > > 예를 들어 하나의 큰 파일을 여러개의 파일로 나누었다가 다시 하나의 파일로 합치는 과정을 할 때 유용하게 쓰인다.
> > > > 
> > > > ● PrintStream
> > > > 
> > > > > print, println, printf와 같은 메소드를 오버로딩하여 제공
> > > > > 
> > > > > 기능이 향상된 PrintWriter가 있다.
> > > > > 
> > > > > 하지만 System.out의 PrintStream이 자주 사용되기 때문에 둘 다 사용함
> > 
> > ### 2\. 문자 기반의 스트림
> > 
> > > ● Reader / Writer
> > > 
> > > > 바이트 기반의 스트림에서의 InputStream / OutputStream과 같은 역할을 한다.  
> > > > Reader는 특정 인코딩을 읽어서 유니코드로 변환하고 Writer는 유니코드를 특정 인코딩으로 변환하여 저장한다.
> > > 
> > > ● FileReader / FileWriter
> > > 
> > > > 파일로부터 텍스트데이터를 읽고 파일에 쓰는데 사용된다.
> > > > 
> > > > 바이트 기반의 FileInputStream / FileOutputStream과 비슷하다.
> > > 
> > > ● PipedReader / PipedWriter
> > > 
> > > > 쓰레드 간에 데이터를 주고 받을 때 사용된다.
> > > > 
> > > > 입력과 출력 스트림을 하나의 스트림으로 연결해서 데이터를 주고 받을 수 있다.
> > > > 
> > > > 스트림을 생성하고 어느 한 쪽 쓰레드에서 connect()메소드를 호출하여 입력 출력 스트림을 연결하여 사용한다.
> > > > 
> > > > 입출력 마치고 한 쪽의 스트림이 닫히면 나머지 스트림으로 알아서 닫힌다.
> > > > 
> > > > 쓰레드를 시작하기 전에 PipedReader / PipedWriter 연결해야 한다.
> > > 
> > > ● StringReader / StringWriter
> > > 
> > > > 입출력 대상이 메모리이다.
> > > > 
> > > > StringWriter에 출력되는 데이터는 내부의 StringBuffer에 저장된다.
> > > > 
> > > > ```
> > > > getBuffer() : 출력한 데이터가 저장된 StringBuffer를 리턴
> > > > toString() : 출력된 문자열을 리턴
> > > > ```
> > > 
> > > ### 문자기반 보조 스트림
> > > 
> > > > ● BufferedReader / BufferedWriter
> > > > 
> > > > > 버퍼를 이용해서 입출력의 효율을 높인다.
> > > > 
> > > > ● InputStreamReader / OutputStreamWriter
> > > > 
> > > > > 바이트 기반 스트림을 문자 기반 스트림으로 연결시켜주는 역할
> > > > > 
> > > > > 바이트 기반 스트림의 데이터를 특정 인코딩의 문자데이터로 변환할 때 사용
> 
> ### 표준 입출력
> 
> > 콘솔과 도스창으로 데이터의 입출력을 표준 입출력이라 한다.
> > 
> > 표준 입출력 스트림 3가지가 있다. 자동으로 스트림이 생성된다.
> > 
> > ```
> > System.out : 데이터 출력
> > System.in : 데이터 입력
> > System.err : 데이터 출력
> > ```
> > 
> > > ### 표준 입출력의 대상 변경
> > > 
> > > > 콘솔이 아닌 다른 대상으로 변경할 수 있다.
> > > > 
> > > > ```
> > > > setOut(PrintStream out) : 출력을 out으로 지정
> > > > setErr(PrintStream err) : 출력을 err로 지정
> > > > setIn(InputStream in) : 출력을 in으로 지정
> > > > ```
> > 
> > ### RandomAccessFile
> > 
> > > 보통 두 클래스로 입출력의 과정을 실행했지만 RandomAccessFile은 하나의 클래스로 입출력 모두 가능하다
> > > 
> > > 각각 DataInput / DataOutput의 인터페이스를 구현했다.
> > > 
> > > 때문에 기본 자료형 단위로 데이터를 읽고 쓸 수 있다.
> > > 
> > > 이 클래스의 가장 큰 장점은 파일 포인터 이동하여 원하는 위치에 데이터를 읽고 쓸 수 있다.
> 
> ### File
> 
> > 가장 많이 사용되는 입출력 대상이다.
> 
> ### 직렬화란 무엇인가?
> 
> > ### ● Serialization
> > 
> > 객체를 데이터 스트림으로 만드는 것을 말한다.
> > 
> > 객체에 저장된 데이터를 스트림에 쓰기 위해 연속적인 데이터로 변환하는 것이다.
> > 
> > 반대로 스트림으로부터 데이터를 읽어서 객체를 만드는 과정을 역직렬화(deserialization)라 한다.
> > 
> > ### ● ObjectInputStream / ObjectOutputStream
> > 
> > 직렬화할 때에는 ObjectOutputStream을 사용하고 역직렬화 할 때는 ObjectInputStream을 사용한다.
> > 
> > 기반스트림을 필요로 하는 보조 스트림이기 때문에 객체를 생성할 때 입출력할 기반 스트림을 정해야 한다.
> > 
> > ### ● 직렬화 가능한 클래스
> > 
> > Serializable 인터페이스를 구현한다면 직렬화 가능하다.
> > 
> > 조상클래스가 Serializable 인터페이스를 구현했다면 해당 조상 클래스를 상속 받은 자식 클래스 또한 직렬화 가능하다.
> > 
> > 만일 자식 클래스에서는 Serializable 인터페이스를 구현하고 조상 클래스에서는 구현하지 않았다면 자식 클래스의 인스턴스 변수만 직렬화 가능하다.
> > 
> > 제어자 **transient**를 사용하면 직렬화 대상에서 제외할 수 있다.
> > 
> > 역직렬화할 때에는 직렬화 순서와 동일해야 한다.
> > 
> > 직렬화할 객체가 많을 때에는 각 객체를 하나하나 직렬화하기보단 Collection을 사용하는 것도 방법이다.